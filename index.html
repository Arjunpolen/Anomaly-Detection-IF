<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Network Intrusion Detection — Isolation Forest</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-grid"></div>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>

    <header class="site-header">
      <div class="brand">
        <div class="brand-mark">IF</div>
        <div class="brand-text">
          <span>Network Intrusion Detection</span>
          <small>Isolation Forest • Explainable Results</small>
        </div>
      </div>
      <nav class="site-nav">
        <a href="#overview">Overview</a>
        <a href="#data">Upload Data</a>
        <a href="#tree">Isolation Tree</a>
        <a href="#results">Results</a>
      </nav>
      <button class="cta">Deploy Ready</button>
    </header>

    <main>
      <section class="hero" id="overview">
        <div class="hero-text">
          <p class="eyebrow">Professional • Data Structure Visuals</p>
          <h1>Visualize how isolation isolates anomalies, step by step.</h1>
          <p class="lead">
            This UI showcases model behavior with a clean, diagram-first layout. The
            isolation tree is front-and-center, followed by model performance plots
            and a results dashboard that can be deployed as a static site.
          </p>
          <div class="hero-actions">
            <button class="primary">View Results</button>
            <button class="ghost">Download Report</button>
          </div>
          <div class="metrics-row" id="metrics">
            <div class="metric">
              <span class="label">Model</span>
              <span class="value">Isolation Forest</span>
            </div>
            <div class="metric">
              <span class="label">Inference</span>
              <span class="value">Real-time Ready</span>
            </div>
            <div class="metric">
              <span class="label">Anomaly Score</span>
              <span class="value">Scaled 0–1</span>
            </div>
          </div>
          <div class="insight-grid">
            <div class="insight-card">
              <h3>Expected Score Geometry</h3>
              <p>
                For isotropic data, anomaly scores should increase smoothly with distance
                from the center, producing near-circular contours.
              </p>
            </div>
            <div class="insight-card">
              <h3>Why Artifacts Appear</h3>
              <p>
                Standard Isolation Forest uses axis-aligned splits, which can create
                rectangular low-score bands and ghost clusters.
              </p>
            </div>
            <div class="insight-card">
              <h3>Impact on Decisions</h3>
              <p>
                Points at similar distances may receive different scores, making
                thresholding and score-based ranking less reliable.
              </p>
            </div>
          </div>
        </div>
        <div class="hero-panel">
          <div class="panel-head">
            <span>Live Snapshot</span>
            <span class="pill">2026</span>
          </div>
          <div class="panel-body">
            <img id="dashboardImage" src="results/plots/dashboard.png" alt="Dashboard" />
          </div>
        </div>
      </section>

      <section class="data" id="data">
        <div class="section-head">
          <h2>Upload CSV Data</h2>
          <p>Drop a CSV file to summarize features and run detection in the background.</p>
        </div>
        <div class="data-grid">
          <div class="uploader" id="uploader">
            <div class="uploader-inner">
              <div class="uploader-icon">CSV</div>
              <h3>Drag & drop your CSV</h3>
              <p>or click to browse. Max 5MB recommended.</p>
              <input type="file" id="csvInput" accept=".csv" />
              <button class="ghost" id="uploadBtn" type="button">Upload CSV</button>
              <button class="ghost" id="sampleBtn">Load Sample</button>
              <button class="primary" id="showResultsBtn" type="button">Show Results</button>
              <p class="muted" id="uploadStatusText">No file loaded.</p>
            </div>
          </div>
          <div class="data-summary">
            <div class="metric">
              <span class="label">Rows</span>
              <span class="value" id="rowsValue">—</span>
            </div>
            <div class="metric">
              <span class="label">Columns</span>
              <span class="value" id="colsValue">—</span>
            </div>
            <div class="metric">
              <span class="label">Missing Cells</span>
              <span class="value" id="missingValue">—</span>
            </div>
            <div class="metric">
              <span class="label">Numeric Features</span>
              <span class="value" id="numericValue">—</span>
            </div>
            <div class="metric">
              <span class="label">Normal</span>
              <span class="value" id="normalValue">—</span>
            </div>
            <div class="metric">
              <span class="label">Anomalies</span>
              <span class="value" id="anomalyValue">—</span>
            </div>
            <div class="metric">
              <span class="label">Accuracy</span>
              <span class="value" id="accuracyValue">—</span>
            </div>
          </div>
        </div>
        <div class="data-notes">
          <div class="note-card compact">
            <h3>Training & Scoring</h3>
            <p>
              Each tree selects a random feature and threshold, splitting data until
              points are isolated. Shorter average path length implies higher anomaly.
            </p>
          </div>
          <div class="note-card compact">
            <h3>Label-Aware Metrics</h3>
            <p>
              If your CSV includes a label column, the app computes confusion matrix
              and ROC. Otherwise, it focuses on unsupervised score distributions.
            </p>
          </div>
        </div>
      </section>

      <section class="tree" id="tree">
        <div class="section-head">
          <h2>Isolation Tree</h2>
          <p>Structured like a data structure diagram, showing splits and isolation depth.</p>
        </div>
        <div class="tree-grid">
          <div class="tree-visuals">
            <figure class="tree-figure">
              <img src="assets/tree-single.svg" alt="Single isolation tree with anomaly and nominal paths" />
              <figcaption>Single tree with a fast anomaly path and a deeper nominal path.</figcaption>
            </figure>
            <figure class="tree-figure">
              <img src="assets/forest-radial.svg" alt="Forest view where each radial line is a tree" />
              <figcaption>Forest view where each radial line represents one tree in the ensemble.</figcaption>
            </figure>
          </div>
          <div class="tree-notes">
            <div class="note-card">
              <h3>Random Branching</h3>
              <p>
                Each tree chooses a random feature and a random cutoff, splitting points
                left/right until isolation or a depth limit is reached.
              </p>
            </div>
            <div class="note-card">
              <h3>Depth to Score</h3>
              <p>
                Scores are derived from the average depth a point reaches across many trees,
                normalized by expected search depth.
              </p>
            </div>
            <div class="note-card">
              <h3>Axis-Aligned Artifacts</h3>
              <p>
                Because splits are vertical or horizontal, bands and ghost clusters can appear,
                especially in structured datasets like sinusoidal patterns.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="results" id="results">
        <div class="section-head">
          <h2>Results Gallery</h2>
          <p>Clean, publication-style visuals for your report and live deployment.</p>
        </div>
        <p class="label-note" id="labelNote" hidden>
          Upload a CSV with a label column (e.g. label/class/target) to enable Confusion Matrix & ROC.
        </p>
        <div class="gallery" id="gallery">
          <figure data-plot="confusion_matrix">
            <img src="results/plots/confusion_matrix.png" alt="Confusion matrix" />
            <figcaption>Confusion Matrix</figcaption>
          </figure>
          <figure data-plot="roc_curve">
            <img src="results/plots/roc_curve.png" alt="ROC curve" />
            <figcaption>ROC Curve</figcaption>
          </figure>
          <figure data-plot="score_distribution">
            <img src="results/plots/score_distribution.png" alt="Score distribution" />
            <figcaption>Score Distribution</figcaption>
          </figure>
          <figure data-plot="metrics_snapshot">
            <img src="results/plots/metrics_snapshot.png" alt="Metrics snapshot" />
            <figcaption>Metrics Snapshot</figcaption>
          </figure>
        </div>
        <div class="results-notes">
          <div class="note-card compact">
            <h3>Score Maps</h3>
            <p>
              In ideal cases, score contours are smooth and symmetric. Rectangular bands
              signal axis-aligned artifacts that can mask true anomalies.
            </p>
          </div>
          <div class="note-card compact">
            <h3>Interpretation</h3>
            <p>
              Use ROC/Confusion Matrix when labels exist, and rely on distribution plots
              to inspect separation between nominal and anomalous points.
            </p>
          </div>
        </div>
        <div class="references">
          <h3>References</h3>
          <a href="https://www.computer.org/csdl/journal/tk/2021/04/08888179/1ezPj2fNKk8" target="_blank" rel="noopener noreferrer">
            IEEE TKDE: Extended Isolation Forest (2021)
          </a>
        </div>
      </section>

    </main>

    <footer class="site-footer">
      <div>
        <strong>Network Intrusion Detection</strong>
        <span>Static deploy-ready UI</span>
      </div>
      <div>
        <span>Contact</span>
        <span>polearjun@gmail.com</span>
      </div>
    </footer>

    <div class="lightbox" id="lightbox" aria-hidden="true">
      <div class="lightbox-backdrop" id="lightboxBackdrop"></div>
      <div class="lightbox-content" role="dialog" aria-modal="true">
        <button class="lightbox-close" id="lightboxClose" aria-label="Close">×</button>
        <img id="lightboxImage" alt="Expanded result" />
        <p id="lightboxCaption"></p>
      </div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
